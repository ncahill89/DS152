<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Observational Studies – Introduction to Data Science (2)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#observational-study" id="toc-observational-study" class="nav-link active" data-scroll-target="#observational-study">Observational Study</a></li>
  <li><a href="#example-1-student-happiness" id="toc-example-1-student-happiness" class="nav-link" data-scroll-target="#example-1-student-happiness">Example 1: Student Happiness</a>
  <ul class="collapse">
  <li><a href="#exploring-categorical-variables" id="toc-exploring-categorical-variables" class="nav-link" data-scroll-target="#exploring-categorical-variables"><strong>1. Exploring Categorical Variables</strong></a></li>
  <li><a href="#exploring-numeric-variables" id="toc-exploring-numeric-variables" class="nav-link" data-scroll-target="#exploring-numeric-variables"><strong>2. Exploring Numeric Variables</strong></a></li>
  <li><a href="#relationships-between-variables" id="toc-relationships-between-variables" class="nav-link" data-scroll-target="#relationships-between-variables"><strong>3. Relationships Between Variables</strong></a></li>
  <li><a href="#modelling" id="toc-modelling" class="nav-link" data-scroll-target="#modelling"><strong>4. Modelling</strong></a></li>
  </ul></li>
  <li><a href="#example-2-does-working-out-increase-energy-levels" id="toc-example-2-does-working-out-increase-energy-levels" class="nav-link" data-scroll-target="#example-2-does-working-out-increase-energy-levels">Example 2: Does working out increase energy levels?</a></li>
  <li><a href="#confounding-variables" id="toc-confounding-variables" class="nav-link" data-scroll-target="#confounding-variables">Confounding variables</a></li>
  <li><a href="#example-3" id="toc-example-3" class="nav-link" data-scroll-target="#example-3">Example 3</a>
  <ul class="collapse">
  <li><a href="#reducing-confounding-matching" id="toc-reducing-confounding-matching" class="nav-link" data-scroll-target="#reducing-confounding-matching">Reducing confounding: Matching</a></li>
  <li><a href="#reducing-confounding-multiple-regression" id="toc-reducing-confounding-multiple-regression" class="nav-link" data-scroll-target="#reducing-confounding-multiple-regression">Reducing confounding: Multiple Regression</a></li>
  </ul></li>
  <li><a href="#conditional-probability" id="toc-conditional-probability" class="nav-link" data-scroll-target="#conditional-probability">Conditional Probability</a></li>
  <li><a href="#conditional-probability-1" id="toc-conditional-probability-1" class="nav-link" data-scroll-target="#conditional-probability-1">Conditional Probability</a></li>
  <li><a href="#whats-going-on" id="toc-whats-going-on" class="nav-link" data-scroll-target="#whats-going-on">What’s going on?</a></li>
  <li><a href="#simpsons-paradox-correlation-reversal" id="toc-simpsons-paradox-correlation-reversal" class="nav-link" data-scroll-target="#simpsons-paradox-correlation-reversal">Simpsons’ Paradox: Correlation Reversal</a></li>
  <li><a href="#example-continued" id="toc-example-continued" class="nav-link" data-scroll-target="#example-continued">Example Continued</a></li>
  <li><a href="#resolving-the-paradox" id="toc-resolving-the-paradox" class="nav-link" data-scroll-target="#resolving-the-paradox">Resolving the Paradox</a></li>
  <li><a href="#resolving-the-paradox-1" id="toc-resolving-the-paradox-1" class="nav-link" data-scroll-target="#resolving-the-paradox-1">Resolving the Paradox</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Observational Studies</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- ## Scientific Studies -->
<!-- **Observational** -->
<!-- -   Collect data in a way that does not directly interfere with how the data arise, i.e. merely "observe"; -->
<!-- -   Based on an observational study, we can only establish an association, in other words correlation, between the explanatory and response variables; -->
<!-- -   With an observational study you are just observing the data and collecting it after or as it occurs. -->
<!-- **Experimental** -->
<!-- -   Randomly assign subjects to treatments -->
<!-- -   Establish causal connections -->
<!-- ## Studies and Conclusions -->
<!-- ![](images/studies_conclusions.png) -->
<!-- ## Why use observational studies? -->
<!-- Reasons why we must sometimes use an observational study instead of an experiment ... -->
<!-- 1.  It is unethical or impossible to assign people to receive a specific treatment. -->
<!--     -   For example, if you want to know the impact of smoking on cancer you cannot design a study and assign some people to be smokers and other to be non-smokers. That is not ethical. -->
<!-- 2.  Certain exposure variables are inherent traits and cannot be randomly assigned. -->
<!-- ## Observational studies -->
<!-- -   Observational studies are very useful when it is not possible to design a study -->
<!-- -   Obervational studies often have large sample sizes -->
<!-- -   They are cheaper than designing a study (for example, clinical trials in medicine are very expensive) -->
<!-- -   You have to get to know the data a lot better with observational studies. You haven't set up to study or controlled for influences other than the thing you are studying. -->
<!-- ##  -->
<!-- \centering -->
<!-- ![](images/popsamp.png) -->
<!-- ##  -->
<!-- \centering -->
<!-- ![](images/precbias.png) -->
<!-- ## Retrospective Vs Prospective Studies -->
<!-- If an observational study uses data from the past, it is called retrospective study, whereas if data are collected throughout the study, it is called prospective; -->
<!-- ![](images/retroprosp.png) -->
<section id="observational-study" class="level2">
<h2 class="anchored" data-anchor-id="observational-study">Observational Study</h2>
<p><strong>Observational Study: A study which observes individuals and measures variables, but does not attempt to influence the responses.</strong></p>
<ul>
<li><p>An observational study on individuals from a random sample allows one to generalize conclusions about the sample to the population.</p></li>
<li><p>An observational study cannot show cause-and-effect relationships because there is the possibility that the response is affected by some variable(s) other than the ones being measured. That is, confounding variables may be present. “It ain’t what you don’t know that gets you into trouble. It’s what you know for sure that just ain’t so.” - Mark Twain</p></li>
<li><p>In prospective observational studies, investigators choose a sample and collect new data generated from that sample. That is, the investigators “look forward in time.”</p></li>
<li><p>In retrospective observational studies, investigators “look backwards in time” and use data that have already been collected. Retrospective studies are often criticized for having more confounding and bias compared to prospective studies.</p></li>
</ul>
</section>
<section id="example-1-student-happiness" class="level2">
<h2 class="anchored" data-anchor-id="example-1-student-happiness">Example 1: Student Happiness</h2>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: abd</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: nlme</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'nlme'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    collapse</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: grid</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: mosaic</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'mosaic':
  method                           from   
  fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
The 'mosaic' package masks several functions from core packages in order to add 
additional features.  The original behavior of these functions should not be affected by this.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'mosaic'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:Matrix':

    mean</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    count, do, tally</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    cross</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    stat</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
    quantile, sd, t.test, var</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    max, mean, min, prod, range, sample, sum</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Welcome to tigerstats!
To learn more about this package, consult its website:
    http://homerhanumat.github.io/tigerstats</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 47
Columns: 6
$ rating.fresh &lt;int&gt; 9, 8, 5, 5, 8, 7, 9, 9, 7, 9, 8, 10, 8, 8, 9, 9, 6, 10, 1…
$ rating.js    &lt;int&gt; 7, 10, 8, 8, 10, 9, 9, 8, 8, 8, 8, 10, 8, 10, 9, 7, 7, 10…
$ greek        &lt;fct&gt; y, n, y, n, n, y, y, y, y, y, n, n, n, n, n, n, n, y, n, …
$ athlete      &lt;fct&gt; n, n, n, n, n, n, n, n, n, n, n, n, n, n, n, n, n, y, y, …
$ rating.diff  &lt;int&gt; -2, 2, 3, 3, 2, 2, 0, -1, 1, -1, 0, 0, 0, 2, 0, -2, 1, 0,…
$ happier      &lt;fct&gt; NO, YES, YES, YES, YES, YES, YES, NO, YES, NO, YES, YES, …</code></pre>
</div>
</div>
<section id="exploring-categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="exploring-categorical-variables"><strong>1. Exploring Categorical Variables</strong></h3>
<p>If <code>gcfeeling</code> contains categorical variables, we can visualize their distributions:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exploring-numeric-variables" class="level3">
<h3 class="anchored" data-anchor-id="exploring-numeric-variables"><strong>2. Exploring Numeric Variables</strong></h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="relationships-between-variables" class="level3">
<h3 class="anchored" data-anchor-id="relationships-between-variables"><strong>3. Relationships Between Variables</strong></h3>
<section id="pairwise-correlation-for-numeric-variables" class="level4">
<h4 class="anchored" data-anchor-id="pairwise-correlation-for-numeric-variables"><strong>Pairwise Correlation (For Numeric Variables)</strong></h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.402741</code></pre>
</div>
</div>
</section>
<section id="scatterplots-for-numeric-variables" class="level4">
<h4 class="anchored" data-anchor-id="scatterplots-for-numeric-variables"><strong>Scatterplots for Numeric Variables</strong></h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplots-of-numerical-variables-by-categories" class="level4">
<h4 class="anchored" data-anchor-id="boxplots-of-numerical-variables-by-categories"><strong>Boxplots of Numerical Variables by Categories</strong></h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="modelling" class="level3">
<h3 class="anchored" data-anchor-id="modelling"><strong>4. Modelling</strong></h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = rating.js ~ rating.fresh + athlete + greek, data = gcfeeling)

Coefficients:
 (Intercept)  rating.fresh      athletey        greeky  
      5.0287        0.3277        0.7594        0.8272  </code></pre>
</div>
</div>
</section>
</section>
<section id="example-2-does-working-out-increase-energy-levels" class="level2">
<h2 class="anchored" data-anchor-id="example-2-does-working-out-increase-energy-levels">Example 2: Does working out increase energy levels?</h2>
<p>We want to evaluate if regularly working out has any impact on energy levels.</p>
<ul>
<li><p>In an observational study, we sample two types of people from the population, those who choose to work out regularly and those who don’t.</p></li>
<li><p>We ask the people in each group to rate their energy levels from 1-10.</p></li>
<li><p>Then, we find the average “energy level” for the two groups of people and compare.</p></li>
</ul>
<p><img src="images/EnergyLevels.jpg" class="img-fluid"></p>
<p>Can we conclude from this that working out is the cause of increased energy levels?</p>
<ul>
<li><p>There may be other variables that we didn’t control for in this study that contribute to the observed difference.</p></li>
<li><p>For example, people who have young children might have less time to work out and also have lower energy levels.</p></li>
<li><p>This is known as <strong>confounding</strong>.</p></li>
<li><p>This study allows us to make correlation statements. But, we cannot make a causal statement attributing increased energy levels to working out!</p></li>
</ul>
</section>
<section id="confounding-variables" class="level2">
<h2 class="anchored" data-anchor-id="confounding-variables">Confounding variables</h2>
<p><strong>Confounding variables:</strong> Extraneous variables that affect both the exposure (e.g., working out) and the outcome variables (e.g., increased energy), and that make it seem like there is a relationship between them are called confounding variables.</p>
<p><img src="images/Confounding.jpg" class="img-fluid"></p>
</section>
<section id="example-3" class="level2">
<h2 class="anchored" data-anchor-id="example-3">Example 3</h2>
<p>Many years ago, investigators reported an association between coffee drinking and pancreatic cancer in an observational study (<em>MacMahon B, Yen S, Trichopoulos D, Warren K, Nardi G. Coffee and cancer of the pancreas. N Eng J Med 1981; 304: 630-3</em>).</p>
<p><img src="images/Confounding3.png" class="img-fluid"></p>
<p>If we take coffee as our exposure of interest and correlate it with an increased development of pancreatic cancer there is the potential, as was the case with these investigators, to be misled if there is a third causal factor, such as cigarette smoking, that was more common among those who reported drinking coffee.</p>
<p><img src="images/Confounding2.png" class="img-fluid"></p>
<p>Once the confounding variable, smoking is taken into account the correlation between coffee and pancreatic cancer disappears.</p>
<section id="reducing-confounding-matching" class="level3">
<h3 class="anchored" data-anchor-id="reducing-confounding-matching">Reducing confounding: Matching</h3>
<p>Matching is a technique that involves selecting study participants with similar characteristics outside the outcome or exposure variables.</p>
<ul>
<li><p>Rather than using random assignment to equalize the experimental groups, the experimenters do it by matching observable characteristics.</p></li>
<li><p>For every participant in the exposed group, the researchers find a participant with comparable traits to include in the control group.</p></li>
<li><p>Matching subjects facilitates valid comparisons between those groups.</p></li>
<li><p>The researchers use subject-area knowledge to identify characteristics that are critical to match.</p></li>
</ul>
</section>
<section id="reducing-confounding-multiple-regression" class="level3">
<h3 class="anchored" data-anchor-id="reducing-confounding-multiple-regression">Reducing confounding: Multiple Regression</h3>
<p>Multiple regression models specify the way in which different characteristics/variables (exposure and confounders) affects the outcome, thereby isolating the effect of each variable.</p>
<p>chance of cancer = a x (coffee) + b x (smoking) + c x (gender) + d x (age)</p>
<ul>
<li><p>this allows us to make a statement about what would happen if one variable (i.e., the exposure) were to change while all the others (i.e., the confounders) remained the same.</p></li>
<li><p>Obtaining isolated exposure effects conditional on the other variables remaining constant is said to adjust for (or control for) the effect of these confounders</p></li>
</ul>
</section>
</section>
<section id="conditional-probability" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability">Conditional Probability</h2>
<p>You and your friend are trying to find the perfect restaurant for dinner. You can’t decide so you want to instead rely on some observational data (i.e., restaurant reviews).</p>
<p>You find two worthy restaurants, Carla’s and Sophia’s each with 400 reviews and an indicator of whether the restaurant is recommended or not recommended.</p>
<p>You find that</p>
<ul>
<li><p>recommended for Sophia’s = 250/400</p></li>
<li><p>recommended for Carla’s = 216/400</p></li>
</ul>
<p>So what we have is a conditional probability:</p>
<p>p(recommended|Sophia’s) = 62.5%</p>
<p>p(recommended|Carla’s) = 54%</p>
</section>
<section id="conditional-probability-1" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability-1">Conditional Probability</h2>
<p>What if we consider age as a factor here?</p>
<ul>
<li><p>recommended for 18-35 yr old diners at Sophia’s = 50/150</p></li>
<li><p>recommended for 35+ diners at Sophia’s = 200/250</p></li>
<li><p>recommended for 18-35 yr old diners at Carla’s = 180/360</p></li>
<li><p>recommended for 35+ diners at Carla’s = 36/40</p></li>
</ul>
<p>So what we have is:</p>
<p>p(recommended|Sophia’s, younger) = 30%</p>
<p>p(recommended|Sophia’s, older) = 80%</p>
<p>p(recommended|Carla’s, younger) = 50%</p>
<p>p(recommended|Carla’s, older) = 90%</p>
</section>
<section id="whats-going-on" class="level2">
<h2 class="anchored" data-anchor-id="whats-going-on">What’s going on?</h2>
<p>You have unknowingly entered the world of Simpson’s Paradox, where a restaurant can be both better and worse than its competitor, exercise can lower and increase the risk of disease, and the same dataset can be used to prove two opposing arguments. Instead of going out to dinner, perhaps you and your friend should spend the evening discussing this fascinating statistical phenomenon.</p>
<p><strong>Simpson’s Paradox occurs when trends that appear when a dataset is separated into groups reverse when the data are aggregated.</strong></p>
</section>
<section id="simpsons-paradox-correlation-reversal" class="level2">
<h2 class="anchored" data-anchor-id="simpsons-paradox-correlation-reversal">Simpsons’ Paradox: Correlation Reversal</h2>
<p>Say we have data on the number of hours of exercise per week versus the risk of developing a disease for two sets of patients, those below the age of 50 and those over the age of 50. Here are individual plots showing the relationship between exercise and risk of disease.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-continued" class="level2">
<h2 class="anchored" data-anchor-id="example-continued">Example Continued</h2>
<p>We clearly saw a negative correlation, indicating that increased levels of exercise per week are correlated with a lower risk of developing the disease for both groups. Now, let’s combine the data together on a single plot:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resolving-the-paradox" class="level2">
<h2 class="anchored" data-anchor-id="resolving-the-paradox">Resolving the Paradox</h2>
<p>To avoid Simpson’s Paradox leading us to two opposite conclusions, we need to choose to segregate the data in groups or aggregate it together. That seems simple enough, but how do we decide which to do?</p>
<p>The answer is to think causally: how was the data generated and based on this, what factors influence the results that we are not shown?</p>
<p>In the exercise vs disease example, we intuitively know that exercise is not the only factor affecting the risk of developing a disease. In the data, there are two different causes of disease yet by aggregating the data and looking at only risk vs exercise, we ignore the second cause - age - completely.</p>
</section>
<section id="resolving-the-paradox-1" class="level2">
<h2 class="anchored" data-anchor-id="resolving-the-paradox-1">Resolving the Paradox</h2>
<p>If we go ahead and plot risk vs age, we can see that the age of the patient is strongly positively correlated with disease risk.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ObservationalStudies_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>As the patient increases in age, their risk of the disease increases which means older patients are more likely to develop the disease than younger patients even with the same amount of exercise. Therefore, to assess the effect of just exercise on disease, we would want to hold the age constant and change the amount of weekly exercise.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>